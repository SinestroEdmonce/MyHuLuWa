# 葫芦娃程序说明
本实验完成了一个葫芦娃为了保护爷爷与妖怪们自动化作战的程序
## 功能与使用说明
本程序模拟了葫芦娃七兄弟与妖怪队伍作战的场景，战斗开始前可以弹出面板选择葫芦娃的作战队形（鹤翼阵，锋矢阵等），选择结束后进入作战界面，按下空格战斗开始，按ESC退出战斗，在作战开始之前按下L可以选择作战录像进行回放，作战开始前葫芦娃居左，如下图：


![image](ScreenShots/start.png)

此时有两种选择，可以选择按下空格键直接进入战斗，如下图：

![image](ScreenShots/formation.png)

或者是按下L键选择文件进行回放。

如果选择了战斗，战斗过程中会将战斗记录到相对路径下document文件夹中以txt文件形式记录，战斗结束后可以按下L键并选择文件播放，或者直接按ESC退出。

战斗结束场景如下:

![image](ScreenShots/end.png)

如果选择了播放文件，将开始回放某一保存的录像记录，txt文件内的格式必须符合程序要求，否则将不能播放。
***
## 部分实现细节说明
### 模块间关系
```
graph TD
A[Main] --> B[UIBoard]
B --> C[Creature]
B -->|TWO| D[Space]
B -->|THREE| E[Formation]
B -->|FOUR| F[IO]
B -->|FIVE| G[Queue]
G --> C

```
### 生物类
此部分代码完全沿用了之前写过的葫芦娃程序，以Creature类为基类，派生出具体的类，结构如下图：

```
graph TD
A[Thing2D] --> B[Creature]
B -->|ONE| C[HuLuWa]
B -->|TWO| D[LaoYeYe]
B -->|THREE| E[SheJing]
B -->|FOUR| F[XieZiJing]
B -->|FIVE| G[XiaoLouLuo]
```

### 背景类与战场类
背景中的一个区域被划为战场，背景类中包含战场类battle。

### 战场类
战场上发生战斗，战场类负责处理双方队伍，以及整体的战斗状况，比如当前战士们的位置，是否需要战斗判断，战斗判断的结果等。

### 战场类和生物类
战场类中有一个Vector存储所有队伍的所有判定为活着的生物，生物类负责每个个体的生死，移动，是该程序运行的基本单位。
***
## 设计原则及思想
**单一职责原则**  
当需要修改某个类的时候原因有且只有一个。换句话说就是让一个类只做一种类型责任，当这个类需要承当其他类型的责任的时候，就需要分解这个类。从我的模块关系图中可以看得出该理念的运用。


**里氏替换原则**

当一个子类的实例应该能够替换任何其父类的实例时，它们之间才具有is-A关系，任何具体的生物类型都可以替换生物类型。

**依赖倒置原则**
1. 高层模块不应该依赖于低层模块，二者都应该依赖于抽象 
2. 抽象不应该依赖于细节，细节应该依赖于抽象
